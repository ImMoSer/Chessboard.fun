# План: Добавление информационных подсказок к лидербордам

**Цель:** Добавить иконки "Инфо" к заголовкам таблиц на странице рекордов (`Leaderboards`). Клик по иконке должен открывать модальное окно с описанием правил формирования соответствующего рейтинга. Необходимо максимально переиспользовать существующие компоненты.

---

## Детализированный План Реализации

### Шаг 1: Рефакторинг `InfoModal` и `ui.store` для универсальности

1.  **Обновить `ui.store.ts`**:
    *   Заменить состояние `isInfoModalVisible: boolean` на `infoModalKey: string | null` (по умолчанию `null`). Это позволит передавать уникальный ключ для любого контента.
    *   Переименовать и изменить действие `toggleInfoModal` на `showInfoModal(key: string)` и `hideInfoModal()`. `showInfoModal` будет устанавливать `infoModalKey`, а `hideInfoModal` — сбрасывать его в `null`.

2.  **Адаптировать `InfoModal.vue`**:
    *   Видимость окна теперь будет управляться через `v-if="uiStore.infoModalKey"`.
    *   Убрать из компонента логику, основанную на `useRoute()`. 
    *   Компонент будет получать контент на основе ключа из `uiStore.infoModalKey`. Предполагается, что ключ будет вести к объекту с полями `title` и `content` в файлах локализации (например, `t(uiStore.infoModalKey + '.title')`).

3.  **Обновить `App.vue`**:
    *   Изменить условие `v-if` для `<InfoModal>` на `uiStore.infoModalKey !== null`.

4.  **Обновить `controls.store.ts`**:
    *   Изменить действие `onShowInfo`, чтобы оно вызывало `uiStore.showInfoModal(key)`, где `key` — это ключ, динамически сформированный на основе текущего маршрута (например, `'info.modes.' + route.name`).

### Шаг 2: Обновление файлов локализации

1.  **Реструктурировать объект `info`** в `src/locales/*.json`:
    *   Создать два вложенных объекта: `modes` и `leaderboards`.
    *   Переместить существующие описания игровых режимов в `info.modes`.
    *   Для каждого ключа в `info.modes` и `info.leaderboards` создать структуру: `{ "title": "...", "content": "..." }`.
    *   Добавить описания для каждого лидерборда (`topFinishHim`, `topAttack`, `towerLeaderboard` и т.д.) в объект `info.leaderboards`.

### Шаг 3: Создание переиспользуемого компонента `InfoIcon`

1.  **Создать компонент `InfoIcon.vue`**:
    *   Создать новый файл `src/components/InfoIcon.vue`.
    *   Компонент будет отображать иконку `info.svg` и принимать `prop` под названием `topic` (строка).
    *   По клику на иконку компонент будет вызывать `uiStore.showInfoModal('info.leaderboards.' + props.topic)`.

### Шаг 4: Интеграция `InfoIcon.vue` на странице рекордов

1.  **Найти и модифицировать компоненты лидербордов**:
    *   Проанализировать `src/views/RecordsPageView.vue` и его дочерние компоненты, чтобы найти места, где отображаются заголовки таблиц.
    *   Импортировать и добавить `<InfoIcon topic="..." />` рядом с каждым заголовком. Значение `topic` должно соответствовать ключу из `info.leaderboards` в файлах локализации.

### Шаг 5: Финальная проверка

1.  **Проверить типы**:
    *   Выполнить команду `pnpm type-check` для гарантии отсутствия ошибок.
2.  **Ручное тестирование**:
    *   Убедиться, что кнопка "Инфо" в `ControlPanel` по-прежнему корректно работает для игровых режимов.
    *   Проверить, что новые иконки на странице рекордов открывают модальное окно с правильной информацией для каждого лидерборда.